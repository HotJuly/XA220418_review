#  跨域相关

1. 问题一:什么是跨域

   1. 违反了浏览器的同源策略

   2. 问题:什么是同源策略

      1. 两个URL中的协议名,域名,端口三者都相同就称为同源

      2. ```javascript
         //例子一:以下两个链接协议名不同,所以不同源
         	http://localhost:3000/about
         	ftp://localhost:3000/home

         //例子二:以下两个链接域名不相同,所以不同源
         	http://localhost:3000/about
         	http://127.0.0.1:3000/home

         //例子三:以下两个链接仅有查询字符串不同,而查询字符串不再判断范围之内,所以是同源的
         	http://localhost:3000/about?a=1
         	http://localhost:3000/home?b=2
         ```
         ​

      3. URL的组成部分:协议名+域名(主机地址)+端口号+查询字符串(查询字符串包括了路由接口和请求参数)

2. 问题二:跨域一定会报错吗?

   1. 不一定
   2. img/video/audio/link/script等标签跨域不会报错
   3. 服务器之间跨域不会报错
   4. **总结:跨域不一定就会报错,只有在某些特定情况下才会**

3. 问题三:什么情况下会出现跨域问题

   1. 在浏览器中会出现
   2. 发送ajax请求的时候可能会出现跨域报错
   3. **总结:也就是说跨域问题是浏览器搞的鬼**

4. 问题四:哪些请求算是ajax请求(ajax->async javascript and xml)

   1. 只有使用js发送的请求才会是ajax请求
   2. 因为img/video/audio/link/script等标签都没用到js,所以他们发送的只是HTTP请求,所以不会跨域报错
   3. **总结:ajax是一种发送http请求的技术,不是一种特殊的请求**

5. 跨域问题解决方案

   1. jsonp
      1. 原理:script标签跨域请求资源不会报错
      2. 流程:
         1. 前端网页中准备一个存储数据的变量和接收数据的函数
         2. 前端在用户操作的时候,生成一个script标签,并添加src属性为后端接口
            1. 其中将前端接收数据的函数名称,作为query参数传递给服务器
         3. 服务器根据传过来的函数名称,配合需要返回的数据,组成一个全新的字符串,并进行返回
         4. 前端接收到返回的字符串后,script会自动将该字符串作为js代码执行
      3. 好处:
         1. 该方案上线之后依旧可以正常使用
      4. 坏处:
         1. 后端需要准备专门的接口拼接数据,很麻烦
         2. 前端还要准备变量,函数,script标签才能发送成功
   2. CORS(跨域资源共享)
      1. 原理:跨域问题是浏览器搞的鬼,只要浏览器和服务器双方都允许本次请求,那么就不会跨域
      2. 流程:
         1. 后端在响应头头添加配置即可
            1. Access-Control-Allow-Origin: *
      3. 好处:
         1. 前端什么都不用做,请求就可以了
      4. 坏处:
         1. 后端需要给这些请求都进行额外操作,在响应头中进行配置
   3. proxy
      1. 原理:浏览器和服务器之间根本不存在跨域问题
      2. 好处
         1. 前端配置简单方便,不容易出问题
      3. 坏处:
         1. 项目上线之后,该方案就失效了



