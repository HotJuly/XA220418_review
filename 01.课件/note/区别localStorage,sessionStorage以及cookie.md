# 区别localStorage,sessionStorage以及cookie

1. 生命周期
   1. cookie
      1. 如果设置max-age属性,只要当前时间还没有超过该cookie的max-age,那么该cookie中的数据就不会丢失
      2. 如果不设置max-age属性,那么**当前cookie就是会话级cookie**,也就是说只要关闭标签页或者浏览器,那么数据就会丢失
   2. localStorage(持久化存储)
      1. 只要用户不主动删除,那么存在内部的数据就永远不会丢失
   3. sessionStorage(会话存储)
      1. 如果用户关闭标签页或者浏览器,那么存储于内部的数据就会丢失
      2. 问题:请问刷新当前标签页,sessionStorage数据会不会丢失?
         1. 不会丢失
      3. 问题:请问复制当前标签页,会不会有sessionStorage数据?
         1. 新标签页会**深拷贝**旧标签页中的sessionStorage数据
2. 存储位置
   1. cookie
      1. 如果设置max-age属性,存储于硬盘中
      2. 如果不设置max-age属性,存储于内存中
   2. localStorage
      1. 存储于硬盘中
   3. sessionStorage
      1. 存储于内存中
3. 存储大小
   1. cookie->4KB
   2. localStorage->一般是5MB,IE是3012KB
   3. sessionStorage->一般是5MB,IE是3012KB
4. 作用范围
   1. cookie
      1. domain属性
         1. 假设domain=".baidu.com"
         2. 那么该cookie就可以被该域名的后代域名访问,例如www.baidu.com就可以访问当前cookie
      2. path属性
         1. 假设path="/a"
         2. 那么该cookie就可以被后代路由地址所访问,例如/a/c就可以访问该cookie
      3. 总结:**儿子可以使用父亲的,父亲不能使用儿子的**
   2. localStorage
      1. 可以跨标签页面使用
      2. localStorage是根据网址进行存储的,不同的网址无法共享localStorage
      3. 总结:两个标签页如果网址相同,那么就可以使用到对方的localStorage
   3. sessionStorage
      1. 只有当前标签页中可以使用
5. 与服务器之间的关系
   1. cookie(被借用的本地存储)
      1. **cookie是由服务器创建,浏览器存储的**
      2. 服务器通过在响应头中添加**set-cookie**属性,来向浏览器传递相关数据
      3. 浏览器通过在请求头中添加cookie属性,来向服务器传递相关数据
      4. **浏览器发送请求会自动携带,接收到cookie会自动存储**
      5. **个人感觉,浏览器比服务器牛逼多了**
   2. localStorage
      1. 与服务器不熟
   3. sessionStorage
      1. 与服务器不熟
6. 使用场景
   1. cookie
      1. 服务器的部分用户相关数据会存储于cookie中,方便他下次使用
   2. localStorage
      1. 一般有一些数据需要留到下次使用,那么就选择使用localStorage
   3. sessionStorage
      1. 一般会存储的都是本次需要使用的数据,因为他存储于内存中,所以计算速度比较快
7. **面试题:如何实现跨标签页通信?**
   1. **前言:需要传递数据的页面简称为A页面,需要接受数据的页面简称B页面**
   2. **使用localStorage实现**
      1. **B页面给window对象绑定事件storage,用于监视同网址的页面存储localStorage的操作**
      2. **A页面通过localStorage.setItem存储数据即可**
      3. **由于A页面存储的数据,那么B页面监听的回调函数就会执行,在事件对象event中,就可以获取到相关数据**
      4. **优点:**
         1. **传递参数方便**
         2. **可以传递多次数据**
      5. **缺点:**
         1. **两个标签页必须打开的是同一个域名,才能成功**
   3. **使用URL传参**
      1. **A页面在跳转打开B页面的时候,在跳转路径中拼接相关数据即可**
      2. **B页面可以通过location对象即可获取到对方相关的数据**
      3. **优点:**
         1. **哪怕两个域名不相同,也可以实现跨域传参**
      4. **缺点:**
         1. **只有跳转页面的时候才能够传递数据,传递次数很少(不好传递)**
   4. **使用domain属性**
      1. **B页面通过window.open方法打开A页面,并同时获取到A页面的window对象(简称w1)**
      2. **A页面将需要传递的数据,存放在自己的window对象身上**
      3. **A和B页面都去修改自己的document.domain属性,将其改为两者的相同上级域名**
      4. **B页面就可以通过流程1中得到的w1对象,获取到A页面的相关数据**